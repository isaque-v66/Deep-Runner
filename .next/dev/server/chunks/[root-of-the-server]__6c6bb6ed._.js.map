{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/paula/Documents/Prog-estudo/teste/projeto-para-testes/src/app/api/training_session/route.ts"],"sourcesContent":["import { currentUser } from \"@clerk/nextjs/server\";\r\nimport { PrismaClient, Prisma } from \"@prisma/client\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\n\r\n\r\n\r\n\r\nconst prisma = new PrismaClient() \r\n\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const user = await currentUser()\r\n        if(!user){\r\n            return NextResponse.json({error: \"Usuário não autenticado\"})\r\n        }\r\n\r\n        const body = await req.json()\r\n\r\n        console.log('indo pro prisma')\r\n        await prisma.workout.create({\r\n            data: {\r\n              date: new Date(body.date),\r\n              distance: parseFloat(body.distance) || 0,\r\n              duration: parseInt(body.duration) || 0,\r\n              pace: body.pace ? parseFloat(body.pace) : null,\r\n              calories: parseInt(body.calories) || 0\r\n            }\r\n        })\r\n\r\n        console.log('sucesso')\r\n        return NextResponse.json({success: true})\r\n\r\n    } catch(error){\r\n        console.error(\"Erro ao criar a sessão\", error)\r\n        return NextResponse.json({error: \"Erro interno no servidir\"})\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\nexport async function GET(){\r\n    \r\n        try {\r\n            const workouts = await prisma.workout.findMany({\r\n                orderBy: {\r\n                    date: 'desc'\r\n                }\r\n             })\r\n\r\n           \r\n\r\n             return NextResponse.json(workouts)\r\n        } catch(error) {\r\n            console.log('erro ao buscar sessões de treino', error)\r\n            return NextResponse.json({error: 'Erro interno no servudor'}, {status: 500})\r\n        }\r\n\r\n    \r\n}\r\n\r\n "],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAMA,MAAM,SAAS,IAAI,6IAAY;AAGxB,eAAe,KAAK,GAAY;IACnC,IAAI;QACA,MAAM,OAAO,MAAM,IAAA,2MAAW;QAC9B,IAAG,CAAC,MAAK;YACL,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAC,OAAO;YAAyB;QAC9D;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,QAAQ,GAAG,CAAC;QACZ,MAAM,OAAO,OAAO,CAAC,MAAM,CAAC;YACxB,MAAM;gBACJ,MAAM,IAAI,KAAK,KAAK,IAAI;gBACxB,UAAU,WAAW,KAAK,QAAQ,KAAK;gBACvC,UAAU,SAAS,KAAK,QAAQ,KAAK;gBACrC,MAAM,KAAK,IAAI,GAAG,WAAW,KAAK,IAAI,IAAI;gBAC1C,UAAU,SAAS,KAAK,QAAQ,KAAK;YACvC;QACJ;QAEA,QAAQ,GAAG,CAAC;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC,SAAS;QAAI;IAE3C,EAAE,OAAM,OAAM;QACV,QAAQ,KAAK,CAAC,0BAA0B;QACxC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC,OAAO;QAA0B;IAC/D;AAGJ;AAMO,eAAe;IAEd,IAAI;QACA,MAAM,WAAW,MAAM,OAAO,OAAO,CAAC,QAAQ,CAAC;YAC3C,SAAS;gBACL,MAAM;YACV;QACH;QAIA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC9B,EAAE,OAAM,OAAO;QACX,QAAQ,GAAG,CAAC,oCAAoC;QAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC,OAAO;QAA0B,GAAG;YAAC,QAAQ;QAAG;IAC9E;AAGR","debugId":null}}]
}