{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/paula/Documents/Prog-estudo/teste/projeto-para-testes/src/app/api/training_session/delete/%5Bid%5D/route.ts"],"sourcesContent":["import { currentUser } from \"@clerk/nextjs/server\";\r\nimport { PrismaClient } from \"@prisma/client/extension\";\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\nimport { success } from \"zod\";\r\n\r\n\r\nconst prisma = new PrismaClient()\r\n\r\n\r\n\r\nexport async function DELETE(req: NextRequest, {params}: {params: Promise<{id: string}>}) {\r\n\r\n    try {\r\n        const {id} = await params\r\n\r\n        const user = await currentUser()\r\n\r\n        if(!user) {\r\n            return NextResponse.json({error: \"O usuário não está logado\"}, {status: 401})\r\n        }\r\n\r\n        //Verificar se o registro existe\r\n        const workout = await prisma.workout.findUnique({\r\n            where: {id}\r\n        })\r\n\r\n\r\n        if(!workout) {\r\n            return NextResponse.json({error: \"Registro inexistente\"}, {status: 404})\r\n        }\r\n\r\n\r\n        await prisma.workout.delete({\r\n            where: {id}\r\n        })\r\n\r\n        return NextResponse.json({success: true, message: \"Registro deletado com sucesso\", deletedId: id}, {status: 200})\r\n\r\n\r\n\r\n\r\n\r\n\r\n    } catch(error){\r\n        console.error(\"Erro ao deletar registro:\", error);\r\n    \r\n    // Erro específico para registro não encontrado\r\n    if (error instanceof Error && error.message.includes(\"Record to delete does not exist\")) {\r\n      return NextResponse.json(\r\n        { error: \"Registro não encontrado\" },\r\n        { status: 404 }\r\n      );\r\n    }\r\n    \r\n    return NextResponse.json(\r\n      { error: \"Erro interno no servidor\" },\r\n      { status: 500 }\r\n    );\r\n    }\r\n}"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAIA,MAAM,SAAS,IAAI,uKAAY;AAIxB,eAAe,OAAO,GAAgB,EAAE,EAAC,MAAM,EAAkC;IAEpF,IAAI;QACA,MAAM,EAAC,EAAE,EAAC,GAAG,MAAM;QAEnB,MAAM,OAAO,MAAM,IAAA,2MAAW;QAE9B,IAAG,CAAC,MAAM;YACN,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAC,OAAO;YAA2B,GAAG;gBAAC,QAAQ;YAAG;QAC/E;QAEA,gCAAgC;QAChC,MAAM,UAAU,MAAM,OAAO,OAAO,CAAC,UAAU,CAAC;YAC5C,OAAO;gBAAC;YAAE;QACd;QAGA,IAAG,CAAC,SAAS;YACT,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAC,OAAO;YAAsB,GAAG;gBAAC,QAAQ;YAAG;QAC1E;QAGA,MAAM,OAAO,OAAO,CAAC,MAAM,CAAC;YACxB,OAAO;gBAAC;YAAE;QACd;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC,SAAS;YAAM,SAAS;YAAiC,WAAW;QAAE,GAAG;YAAC,QAAQ;QAAG;IAOnH,EAAE,OAAM,OAAM;QACV,QAAQ,KAAK,CAAC,6BAA6B;QAE/C,+CAA+C;QAC/C,IAAI,iBAAiB,SAAS,MAAM,OAAO,CAAC,QAAQ,CAAC,oCAAoC;YACvF,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA0B,GACnC;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA2B,GACpC;YAAE,QAAQ;QAAI;IAEhB;AACJ","debugId":null}}]
}